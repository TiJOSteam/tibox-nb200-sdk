# TiBOX-NB200 可编程数传控制器用户手册

## 产品介绍

TiBOX-NB200 是钛云物联开发的支持NB-IoT的可编程数传控制器， 它提供1个RS485和1个RS232端口， 可通过NB-IoT将数据上报至云端, 满足用户对NB-IoT接入需求。

TiBOX-NB200 内置钛云物联自主知识产权的钛极OS(TiJOS)物联网操作系统，支持用户通过Java语言进行功能扩展，适用各种工况， 它强大的可编程功能允许用户根据项目需求通过Java语言开发相关所需的功能， 如串口通讯， 协议解析，上传云端等等。

TiBOX-NB200提供了丰富的文档和例程，并提供了大量开源驱动，如MODBUS等，方便用户可以快速的完成所需功能。

![1538222485990](.\img\1538222485990.png) 

### 产品特点

- 支持标准DTU功能 
- 符合标准NB-IoT协议，支持全网通频段
- 支持RS232/RS485工业总线接入现场设备 
- 支持扩展GPIO进行联动控制
- 内置TiJVM Java虚拟机
- 支持用户进行功能扩展
- 支持通过Java语言进行设备协议解析及控制策略
- 提供标准协议库，如Modbus等等
- 用户可内置多个应用对应不同的应用场景
- 支持多种云平台, 如电信云,华为云,阿里云等公有云, 以及用户私有云
- 支持应用OTA, 可通过云端进行应用动态更新和加载 

## 产品规格

| 参数             | 说明                              |
| ---------------- | --------------------------------- |
| 产品名称         | NB-IoT 可编程数传控制器           |
| 产品型号         | TiBOX-NB200                       |
| 工作电压         | 4-28V                             |
| 工作电流         | 140mA                             |
| 供电方式         | 支持直流电源或USB供电             |
| 无线传输方式     | NB-IoT                            |
| 有线传输方式     | 1个RS485, 1个RS232, 可同时工作    |
| 最大应用支持个数 | 32                                |
| 串口波特率       | 2400~115200bps                    |
| 编程端口         | USB                               |
| 频段(MHz)        | 全网通(B1/B3/B5/B8/B20/B28)       |
| SIM卡规格        | 标准SIM卡                         |
| 通信天线         | SMA天线接口                       |
| 外形尺寸         | 长82mm 宽62mm 高20mm (不含天线)   |
| 工作温度         | -35°C ~ +75°C                     |
| 工作湿度         | 5%~95%(无凝露)                    |
| 外壳材料         | 金属                              |
| 配件             | 12V电源(1A)，USB数据线， 胶棒天线 |



## 接口说明

![1538222803089](.\img\1538222803089.png)

### 有线数据接口

#### RS485/RS232

TiBox-NB200提供了RS485和RS232端口各一个， 并可同时使用， 方便用户连接外部设备，连接时请注意RX和TX的线序。

#### USB编程口

TiBox-NB200同时提供了一个USB串口编程口， 同时也可作为电源， 要通过TiDevManager设备管理连接该编程口后进行设备信息查看，应用管理等功能， 同时该编程口也是应用的日志输出口，用于进行应用测试和诊断。

### 无线数据接口

#### NB-IoT

TiBox-NB200提供NB-IoT数据接口，在插入NB-IoT物联卡后即可接入NB-IoT网络。 

建议使用电信云平台， 具体请参考电信云平台接入文档。

### 其它

#### 直流电源接口(5.5*2.1圆形接口)

使用提供的12V直流电源(1A)连接该接口

#### SIM卡槽

用于放置NB-IoT SIM卡

#### SMA天线底座

NB-IoT SMA接口天线底座， 请使用SMA内螺内针NO-IoT天线。

**注意**:不连接天线是无法接入NB-IoT网络的。

#### 复位键

复位键用于将TiBox进入开发状态， 当用户应用开发完成并设置为自动运行后， TiBox将进入用户应用状态，此时TiDevManager工具无法进行管理。 当用户需要通过TiDevManger进行设备管理或更新内部应用时，需要通过复位键来进入开发状态，具体操作如下：

1. 按住复位键
2. 重新插拔电源
3. 松开复位键

此时设备即进入开发状态， 即可使用TiDevManager进行设备管理或应用开发。

**注**：如果用户处于开发状态， 希望停止当前运行的用户应用时，只需要重新插拔电源即可。

#### LED灯

TiBox-NB200 提供了两个可编程控制的LED灯，分别为NET和LED， 可在应用中根据实际情况来对LED进行打开，关闭，闪烁等操作。



## 设备连接

TIBox-NB200 提供了相关配件， 在进行测试前可按如下步骤进行硬件准备工作。

### 安装天线

将配件中的天线安装到天线底座。

### 安装NB-IoT 物联网卡

推出SIM卡槽后将SIM卡放入后推入。

### 通过RS485/RS232连接设备

将RS232或RS485端口连接到设备进行测试。

### 连接电源

通过直流电源或USB接口连通电源， 二种电源可同时连通。 

### 应用开发

完成连接后， 即可通过钛极OS提供的工具链进行控制器内的应用开发，具体请参考<TiBox-NB200可编程数传控制器开发指南>.

## 应用运行方式

### 上电自动运行

TiBox-NB200最大支持32个用户应用， 同时用户可选择其中一个应用设置为上电自动运行，设置之后设备在上电后即可启动该应用。

具有自动运行属性的应用程序在系统启动时自动启动，任何应用程序都可以设置为自动运行属性，系统默认的自动运行程序为ID=0的应用程序(**shell**)，该应用程序为钛极OS(TiJOS)系统**预装的终端程序**，用户无权删除，用户可通过TiDevManager设备管理器下载应用程序、更改系统配置等。

当用户应用开发测试完成后，可以设置为上电自动运行作为正式产品。

### 停止应用并进入可编程状态

**场景1：**

当某个用户应用设置为上电自动运行后，只能通过复位键来进入可编程状态， 操作过程请参考复位键说明，即按住复位键同时重新上电即可， 此时即可进行应用编程， 或通过TiDevManager设备管理器修改自动运行的用户程序，如果不做修改，重新上电后仍然会自动运行该用户程序， 可将设置ID为0的ti-shell-stm32xx设备为上电自动运行来恢复默认，之后重新上电后即进入可编程状态。

**场景2：**

用户未设置上电自动运行，在开发测试过程中有可能在代码中使用While(true)等方式进入死循环避免程序中途退出或希望随时停止应用，此时通过重新上电即可进入可编程状态并重新运行即可。

## 更多资源

TiBox-NB200是钛云物联的钛极OS(TiJOS)物联网操作系统的一个典型应用， 关于钛极OS(TiJOS)物联网操作系统可参考如下资源：

| 资源                                     | url                                               |
| :--------------------------------------- | ------------------------------------------------- |
| 钛极OS官网                               | [www.tijos.net](http://www.tijos.net)             |
| 钛极OS开发者社区                         | [bbs.tijos.net](http://bbs.tijos.net)             |
| **钛极OS(TiJOS) 文档中心**               | [http://doc.tijos.net](http://doc.tijos.net)      |
| **钛极OS(TiJOS) 驱动仓库**               | [http://store.tijos.net/](http://store.tijos.net) |
| 钛极OS(TiJOS) JDK API文档                | <http://dev.tijos.net/javadoc>                    |
| 微信公众号 - 钛极OS                      | ![WeiXin](./img/TIJOS_WEIXIN.jpg)                 |
| 钛极OS物联网开发交流群QQ - **737547181** | ![QQ](./img/TIJOS_QQ.png)                         |



## 联系方式

北京钛云物联科技有限公司

商务合作：13911058165

品牌热线：010-86462928

公司网址：www.tijos.net

电子邮件：tijos@tijos.net     

在线购买: https://shop423269048.taobao.com/

